<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Registration - EduLearn</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4a00e0;
            --primary-light: #7b48ff;
            --secondary: #8e2de2;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --danger: #dc3545;
            --success: #28a745;
            --warning: #ffc107;
            --teacher-accent: #ff6b6b;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--dark);
            line-height: 1.6;
        }

        .signup-container {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            width: 500px;
            max-width: 95%;
            padding: 2.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.5s ease;
            border-top: 5px solid var(--teacher-accent);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo {
            font-size: 2.2rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .logo i {
            font-size: 1.8rem;
        }

        .signup-title {
            font-size: 1.6rem;
            margin-bottom: 1.8rem;
            color: var(--dark);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .signup-title .badge {
            background-color: var(--teacher-accent);
            color: white;
            font-size: 0.8rem;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .signup-form .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
            position: relative;
        }

        .signup-form label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .signup-form input {
            width: 100%;
            padding: 0.9rem 1rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background-color: white;
        }

        .signup-form input:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(74, 0, 224, 0.1);
        }

        .input-icon {
            position: absolute;
            right: 15px;
            top: 38px;
            color: var(--gray);
            cursor: pointer;
        }

        .input-icon:hover {
            color: var(--primary);
        }

        .password-strength {
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .strength-meter {
            height: 100%;
            width: 0%;
            background: var(--danger);
            transition: all 0.3s;
        }

        .password-hints {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 0.5rem;
        }

        .password-hints ul {
            list-style-type: none;
            padding-left: 0;
        }

        .password-hints li {
            margin-bottom: 0.2rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .password-hints i {
            font-size: 0.6rem;
            transition: all 0.3s;
        }

        .terms {
            display: flex;
            align-items: flex-start;
            margin: 1.5rem 0;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .terms input {
            width: auto;
            margin-right: 0.7rem;
            margin-top: 0.2rem;
        }

        .terms a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .terms a:hover {
            text-decoration: underline;
        }

        .signup-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .signup-btn:hover {
            opacity: 0.95;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 0, 224, 0.3);
        }

        .signup-btn:active {
            transform: translateY(0);
        }

        .signup-btn .spinner {
            display: none;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
        }

        .login-link {
            margin-top: 1.5rem;
            color: var(--gray);
            font-size: 0.95rem;
        }

        .login-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .login-link a:hover {
            text-decoration: underline;
        }

        .error-message {
            color: var(--danger);
            font-size: 0.85rem;
            margin-top: 0.3rem;
            display: none;
        }

        .success-message {
            color: var(--success);
            font-size: 0.85rem;
            margin-top: 0.3rem;
            display: none;
        }

        .form-group.error input {
            border-color: var(--danger);
        }

        .form-group.error .error-message {
            display: block;
        }

        .form-group.success input {
            border-color: var(--success);
        }

        .form-group.success .success-message {
            display: block;
        }

        .hint-item.valid {
            color: var(--success);
        }

        .hint-item.valid i {
            color: var(--success);
        }

        @media (max-width: 768px) {
            .signup-container {
                padding: 1.8rem;
            }

            .logo {
                font-size: 1.8rem;
            }

            .signup-title {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <div class="signup-container">
        <div class="logo">
            <i class="fas fa-graduation-cap"></i>
            <span>EduLearn</span>
        </div>
        <h2 class="signup-title">
            Teacher Registration
            <span class="badge">
                <i class="fas fa-chalkboard-teacher"></i>
                Educator
            </span>
        </h2>

        <form class="signup-form" id="signupForm">
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" placeholder="Enter your first name" required>
                <span class="error-message">Please enter your first name</span>
            </div>

            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" placeholder="Enter your last name" required>
                <span class="error-message">Please enter your last name</span>
            </div>

            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" placeholder="teacher@edulearn.com" required>
                <span class="error-message">Please enter a valid email address</span>
                <span class="success-message">Valid email address</span>
            </div>

            <div class="form-group">
                <label for="subject">Subject/Specialization</label>
                <select id="subject" required>
                    <option value="">Select your subject</option>
                    <option value="Mathematics">Mathematics</option>
                    <option value="Physics">Physics</option>
                    <option value="Chemistry">Chemistry</option>
                    <option value="Biology">Biology</option>
                    <option value="Computer Science">Computer Science</option>
                    <option value="English">English</option>
                    <option value="History">History</option>
                    <option value="Geography">Geography</option>
                    <option value="Economics">Economics</option>
                    <option value="Business Studies">Business Studies</option>
                    <option value="Other">Other</option>
                </select>
                <span class="error-message">Please select your subject</span>
            </div>

            <div class="form-group">
                <label for="qualification">Highest Qualification</label>
                <select id="qualification" required>
                    <option value="">Select your qualification</option>
                    <option value="Bachelor's Degree">Bachelor's Degree</option>
                    <option value="Master's Degree">Master's Degree</option>
                    <option value="PhD">PhD</option>
                    <option value="B.Ed">B.Ed</option>
                    <option value="M.Ed">M.Ed</option>
                    <option value="Other">Other</option>
                </select>
                <span class="error-message">Please select your qualification</span>
            </div>

            <div class="form-group">
                <label for="experience">Years of Teaching Experience</label>
                <select id="experience" required>
                    <option value="">Select experience</option>
                    <option value="0-2">0-2 years</option>
                    <option value="3-5">3-5 years</option>
                    <option value="6-10">6-10 years</option>
                    <option value="11-15">11-15 years</option>
                    <option value="15+">15+ years</option>
                </select>
                <span class="error-message">Please select your experience</span>
            </div>

            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Create a password" required>
                <i class="fas fa-eye input-icon" id="togglePassword"></i>
                <div class="password-strength">
                    <div class="strength-meter" id="strengthMeter"></div>
                </div>
                <div class="password-hints">
                    <ul>
                        <li class="hint-item" id="lengthHint">
                            <i class="fas fa-circle"></i>
                            <span>At least 8 characters</span>
                        </li>
                        <li class="hint-item" id="numberHint">
                            <i class="fas fa-circle"></i>
                            <span>Contains a number</span>
                        </li>
                        <li class="hint-item" id="specialHint">
                            <i class="fas fa-circle"></i>
                            <span>Contains a special character</span>
                        </li>
                        <li class="hint-item" id="upperHint">
                            <i class="fas fa-circle"></i>
                            <span>Contains uppercase letter</span>
                        </li>
                    </ul>
                </div>
                <span class="error-message">Password must meet all requirements</span>
            </div>

            <div class="terms">
                <input type="checkbox" id="agreeTerms" required>
                <label for="agreeTerms">I agree to the <a href="#" target="_blank">Terms of Service</a> and <a href="#" target="_blank">Privacy Policy</a></label>
            </div>

            <button type="submit" class="signup-btn" id="signupBtn">
                <span id="btnText">Create Teacher Account</span>
                <i class="fas fa-spinner spinner" id="spinner"></i>
            </button>
        </form>

        <p class="login-link">Already have an account? <a href="teacherlogin.html">Log in as teacher</a></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const togglePassword = document.getElementById('togglePassword');
            const password = document.getElementById('password');
            const form = document.getElementById('signupForm');
            const signupBtn = document.getElementById('signupBtn');
            const btnText = document.getElementById('btnText');
            const spinner = document.getElementById('spinner');

            // Password strength evaluation
            function evaluatePasswordStrength(value) {
                let strength = 0;
                const hints = {
                    length: document.getElementById('lengthHint'),
                    number: document.getElementById('numberHint'),
                    special: document.getElementById('specialHint'),
                    upper: document.getElementById('upperHint')
                };

                // Criteria checks
                const hasMinLength = value.length >= 8;
                const hasNumber = /\d/.test(value);
                const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(value);
                const hasUpperCase = /[A-Z]/.test(value);

                // Update hint visuals
                hints.length.classList.toggle('valid', hasMinLength);
                hints.number.classList.toggle('valid', hasNumber);
                hints.special.classList.toggle('valid', hasSpecialChar);
                hints.upper.classList.toggle('valid', hasUpperCase);

                // Calculate strength (0-4)
                strength = [hasMinLength, hasNumber, hasSpecialChar, hasUpperCase].filter(Boolean).length;
                return strength;
            }

            // Update password strength meter
            password.addEventListener('input', function() {
                const strengthMeter = document.getElementById('strengthMeter');
                const strength = evaluatePasswordStrength(this.value);
                const width = (strength / 4) * 100;

                strengthMeter.style.width = `${width}%`;

                // Update meter color based on strength
                strengthMeter.style.backgroundColor =
                    strength <= 1 ? 'var(--danger)' :
                    strength === 2 ? '#ffc107' :
                    strength === 3 ? '#17a2b8' :
                    'var(--success)';

                // Validate password in real-time
                validatePassword();
            });

            // Field validation functions
            function validateField(fieldId, validationFn, errorMessage = '', successMessage = '') {
                const field = document.getElementById(fieldId);
                const isValid = validationFn(field.value);
                const formGroup = field.parentElement;

                formGroup.classList.toggle('error', !isValid);
                formGroup.classList.toggle('success', isValid);

                if (errorMessage && formGroup.querySelector('.error-message')) {
                    formGroup.querySelector('.error-message').textContent = !isValid ? errorMessage : '';
                }

                if (successMessage && formGroup.querySelector('.success-message')) {
                    formGroup.querySelector('.success-message').textContent = isValid ? successMessage : '';
                }

                return isValid;
            }

            function validateFirstName() {
                return validateField('firstName', value => value.trim().length >= 2,
                                  'Please enter a valid first name (min 2 chars)');
            }

            function validateLastName() {
                return validateField('lastName', value => value.trim().length >= 2,
                                  'Please enter a valid last name (min 2 chars)');
            }

            function validateEmail() {
                return validateField('email', value => /^\S+@\S+\.\S+$/.test(value),
                                  'Please enter a valid email address',
                                  'Valid email address');
            }

            function validatePassword() {
                const password = document.getElementById('password').value;
                const isValid = password.length >= 8 &&
                             /\d/.test(password) &&
                             /[!@#$%^&*(),.?":{}|<>]/.test(password) &&
                             /[A-Z]/.test(password);

                return validateField('password', () => isValid,
                                   'Password must meet all requirements');
            }

            function validateTerms() {
                const termsChecked = document.getElementById('agreeTerms').checked;
                if (!termsChecked) {
                    alert('Please agree to the terms and conditions');
                }
                return termsChecked;
            }

            // Password visibility toggle
            togglePassword.addEventListener('click', function() {
                const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                password.setAttribute('type', type);
                this.classList.toggle('fa-eye-slash');
                this.setAttribute('title', type === 'password' ? 'Show password' : 'Hide password');
            });

            // Real-time validation triggers
            document.getElementById('firstName').addEventListener('input', validateFirstName);
            document.getElementById('lastName').addEventListener('input', validateLastName);
            document.getElementById('email').addEventListener('input', validateEmail);

            // Form submission handler
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                // Validate all fields
                const isFormValid = validateFirstName() && validateLastName() &&
                                  validateEmail() && validatePassword() && validateTerms();

                if (isFormValid) {
                    try {
                        // UI feedback during submission
                        btnText.textContent = 'Creating Account...';
                        spinner.style.display = 'inline-block';
                        signupBtn.disabled = true;

                        // Prepare data for API
                        const userData = {
                            firstName: document.getElementById('firstName').value,
                            lastName: document.getElementById('lastName').value,
                            email: document.getElementById('email').value,
                            subject: document.getElementById('subject').value,
                            qualification: document.getElementById('qualification').value,
                            experience: document.getElementById('experience').value,
                            password: document.getElementById('password').value
                        };

                        const fullName = `${userData.firstName} ${userData.lastName}`.trim();
                        const payload = {
                            fullName,
                            email: userData.email,
                            password: userData.password,
                            subject: userData.subject,
                            qualification: userData.qualification,
                            experience: userData.experience
                        };

                        const response = await fetch('http://localhost:5000/api/auth/teacher/signup', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        const data = await response.json();

                        if (response.ok) {
                            // Success feedback
                            btnText.textContent = 'Account Created!';
                            signupBtn.style.background = 'linear-gradient(135deg, var(--success), #5cb85c)';

                            // Store token if returned
                            if (data.token) {
                                localStorage.setItem('authToken', data.token);
                                localStorage.setItem('userRole', 'teacher');
                                localStorage.setItem('userEmail', userData.email);
                            }

                            // Redirect to teacher login after brief delay
                            setTimeout(() => {
                                window.location.href = 'teacherlogin.html';
                            }, 1500);
                        } else {
                            // Handle API errors
                            btnText.textContent = 'Create Account';
                            spinner.style.display = 'none';
                            signupBtn.disabled = false;

                            // Show error message
                            alert(data.message || 'Registration failed. Please try again.');
                        }

                    } catch (error) {
                        console.error('Signup error:', error);
                        btnText.textContent = 'Error - Try Again';
                        signupBtn.style.background = 'linear-gradient(135deg, var(--danger), #c82333)';
                        spinner.style.display = 'none';

                        // Reset button after delay
                        setTimeout(() => {
                            btnText.textContent = 'Create Teacher Account';
                            signupBtn.style.background = 'linear-gradient(135deg, var(--primary), var(--secondary))';
                            signupBtn.disabled = false;
                        }, 2000);
                    }
                }
            });
        });
    </script>
</body>
</html>
